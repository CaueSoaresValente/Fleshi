{% extends "homepage.html" %}

{% block title %}
    Perfil - {{ user.username }}
{% endblock %}

{% block style %}
    <style>
        /* Paleta de Cores:
           --purple-intense: #673AB7 (Roxo Principal)
           --magenta-vibrant: #E91E63 (Rosa/Ação)
           --off-white: #FAFAFA (Fundo Suave)
           --text-dark: #212121 (Texto)
        */

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
            background-color: #FAFAFA;
        }

        .container.divmain {
            min-height: 100vh;
            width: 100%;
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            padding-bottom: 50px;
        }

        .profile-card {
            background-color: #FFFFFF;
            width: 90%;
            max-width: 600px;
            padding: 20px;
            margin-top: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .profile-picture-wrapper {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            overflow: hidden;
            border: 3px solid #673AB7;
            margin-bottom: 15px;
        }
        .profile-picture-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .username {
            font-size: 1.5em;
            font-weight: bold;
            color: #212121;
            margin-bottom: 5px;
        }
        .bio {
            color: #757575;
            font-size: 0.9em;
            margin-bottom: 20px;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }

        .action-buttons button, .action-buttons a {
            padding: 8px 18px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            transition: all 0.2s;
            font-size: 0.9em;
        }

        .btn-follow {
            background-color: #673AB7;
            color: white;
            border: 2px solid #673AB7;
        }
        .btn-follow:hover {
            background-color: #5E35B1;
        }

        .btn-edit {
            background-color: white;
            color: #E91E63;
            border: 2px solid #E91E63;
        }
        .btn-edit:hover {
            background-color: #E91E631A;
        }

        .content-nav {
            display: flex;
            width: 100%;
            justify-content: space-around;
            border-bottom: 1px solid #EDE7F6;
            margin-bottom: 20px;
        }

        .content-nav a {
            color: #757575;
            padding: 10px 0;
            font-weight: 600;
            text-decoration: none;
            flex-grow: 1;
            text-align: center;
            border-bottom: 3px solid transparent;
        }

        .content-nav .active {
            color: #673AB7;
            border-bottom: 3px solid #673AB7;
        }


        .photos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(270px, 1fr));
            gap: 30px;
            width: 90%;
            max-width: 100%;
            margin-top: 20px;

        }

    .photos-grid img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
    }

        .upload-form {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 600px;
            margin-top: 20px;
        }

        .upload-form input[type="submit"] {
            background-color: #673AB7;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px;
            transition: background-color 0.3s;
        }


.main-navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    background-color: #FFFFFF;
    padding: 10px 40px;
    border-bottom: 1px solid #EDE7F6;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
    box-sizing: border-box;
}


.navbar-brand-and-links {
    display: flex;
    align-items: center;
    gap: 30px;
}


.navbar-brand {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 1.5em;
    font-weight: bold;
    color: #673AB7;
}

.navbar-brand img {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    object-fit: cover;
}


.navbar-links {
    display: flex;
    gap: 20px;
    color: #000000;

}

.nav-link {
    color: #212121;
    text-decoration: none;
    padding: 5px 0;
    transition: color 0.2s;
    font-weight: 500;
}

.nav-link:hover {
    color: #673AB7;
}

.nav-logout-link {
    color: #E91E63;
    text-decoration: none;
    font-weight: 600;
    padding: 5px 10px;
    border: 1px solid #E91E63;
    border-radius: 4px;
    transition: background-color 0.2s;
}

.nav-logout-link:hover {
    background-color: #E91E631A;
}
.nomelogo{
    margin: 0px;
    color: #771d76;
}
.formprofile{
    display: flex; !important;
    flex-direction: row;
    justify-content: center;
    gap: 10px;
}
.uploadfile{
    display: none;
}

@media (max-width: 768px) {
    .main-navbar {
        padding: 10px 15px;
    }
    .navbar-links {
       display: none;
    }
}

.botao-arquivo {
    background-color: white;
    color: #E91E63;
    padding: 10px 20px;
    border: solid 2px #E91E63;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    margin-top: 10px;
    transition: background-color 0.3s;
}

.botao-arquivo:hover {
   background-color: #E91E631A;
}
h2{
    color: #c9c9c9 !important;
    font-weight: 600;

}



    </style>
{% endblock %}

{% block body %}
    <body>
        <div class="container divmain">

            {% include "navbar.html" %}

            <div class="profile-card">

                <div class="profile-picture-wrapper">
                    <img src="../static/posts_photos/testepng.png" alt="Foto de perfil">
                </div>

                <span class="username">{{ user.username }}</span>

                <div class="content-nav">
                    <a href="#" class="active">Posts</a>
                </div>

                {% if form %}
                    <form method="post" enctype="multipart/form-data" class="upload-form formprofile">
                        {{ form.csrf_token }}
                        <label for="arquivoInput" class="botao-arquivo">Escolher Arquivo</label>
                        {{ form.photo(class="uploadfile", id="arquivoInput") }}
                        {{ form.submit(value="Postar") }}
                    </form>
                {% endif %}

                <a href="{{ url_for('logout')}}" style="color: #673AB7; margin-top: 20px; font-size: 0.9em; text-decoration: none;">Sair</a>
            </div>

            <h2 class="mt-3">Suas Fotos</h2>

          <div class="photos-grid">
            {% for photo in user.photos|reverse %}
                <div>
                    <img src="{{ url_for('static', filename='posts_photos/' ~ photo.file_name) }}">

                    <p style="font-size: 14px; color: #673AB7;">
                        {{ photo.likes|length }} curtidas
                    </p>

                    <ul style="font-size: 12px; color: #555;">
                        {% for like in photo.likes %}
                            <li>{{ like.user.username }}</li>
                        {% endfor %}
                    </ul>
                </div>
            {% endfor %}
          </div>


        </div>
    </body>
{% endblock %}